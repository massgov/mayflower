version: '3.1'

services:
  backstop:
    image: backstopjs/backstopjs:v3.1.21
    volumes:
      - ./:/src
    depends_on:
      - web
    shm_size: 1gb
    entrypoint: [backstop, --config=/src/backstop/backstop.atoms.js]

  # Static file server.
  web:
    image: nginx:alpine
    volumes:
      - ./storybook-static:/usr/share/nginx/html
