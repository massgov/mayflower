import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import Button from '@massds/mayflower-react/dist/Button';
import generateTitle from '../../util/generateTitle';
import { renderReactMarkup } from '../../util/renderCode';
import * as stories from './Button.stories.js';
import IconArrow from '@massds/mayflower-react/dist/Icon/IconArrow';
import IconSearch from '@massds/mayflower-react/dist/Icon/IconSearch';
import IconLogin from '@massds/mayflower-react/dist/Icon/IconLogin';
import IconAlert from '@massds/mayflower-react/dist/Icon/IconAlert';
import IconChevron from '@massds/mayflower-react/dist/Icon/IconChevron';

<Meta
  title={generateTitle('Button')}
  parameters={{
    viewMode: 'docs'
  }}
/>

# Buttons

Buttons are used in forms and interactive applications to trigger actions.

<Canvas withSource="none">
  <Story
		name="button-primary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="" text="Button"/>) } }}>
      <Button usage="" text="Button" />
  </Story>
</Canvas>

Following web best practices buttons have a target area of 45 pixels. To provide more visual affordance that they are clickable—not just text in a box—they have a shadow to appear slightly raised. Small buttons can be used for secondary tasks on forms—for example image upload—and filters on listing pages. Large buttons should be used for form submits or primary calls to action. There should usually be only one primary button in any UI. Font sizes reduce slightly on mobile.

---

### Primary Buttons

- **Usage:** For the main action in a form, or for a call-to-action link on a page.
- **Style:** Default buttons are solid color with contrasting uppercase text. The hover state lightens the primary button background color.

<Canvas>
  <Story
    name="button-primary-c-primary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="" text="Primary"/>) } }}>
      <Button usage="" text="Primary" />
  </Story>
  <Story
    name="button-primary-c-primary-alt"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="" theme="c-primary-alt" text="Primary"/>) } }}>
      <Button usage="" theme="c-primary-alt" text="Primary"/>
  </Story>
  <Story
    name="button-primary-c-highlight"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="" theme="c-highlight" text="Primary"/>) } }}>
      <Button usage="" theme="c-highlight" text="Primary"/>
  </Story>
  <Story
    name="button-primary-c-gray"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="" theme="c-gray-dark" text="Primary"/>) } }}>
      <Button usage="" theme="c-gray-dark" text="Primary"/>
  </Story>
  <Story story={stories.buttonCSS} />
</Canvas>

---

### Secondary Buttons

- **Usage:** For secondary actions.
- **Style:** The outline button has less visual prominence than the primary button so it can be used alongside it as a secondary action, for example "Cancel". The hover state of the secondary button inverts the background and foreground colors.

<Canvas>
  <Story
    name="button-secondary-c-primary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="secondary" text="Secondary"/>) } }}>
      <Button usage="secondary" text="Secondary" />
  </Story>
  <Story
    name="button-secondary-c-primary-alt"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="secondary" theme="c-primary-alt" text="Secondary"/>) } }}>
      <Button usage="secondary" theme="c-primary-alt" text="Secondary"/>
  </Story>
  <Story
    name="button-secondary-c-highlight"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="secondary" theme="c-highlight" text="Secondary"/>) } }}>
      <Button usage="secondary" theme="c-highlight" text="Secondary"/>
  </Story>
  <Story
    name="button-secondary-c-gray"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="secondary" theme="c-gray-dark" text="Secondary"/>) } }}>
      <Button usage="secondary" theme="c-gray-dark" text="Secondary"/>
  </Story>
  <Story story={stories.buttonCSS2} />
</Canvas>

---

### Tertiary Buttons

- **Usage:** For third-level actions.
- **Style:** The gray color is even less prominent than outline button to de-emphasize third-level tasks. The hover state lightens the tertiary button background color.

<Canvas>
  <Story
    name="button-tertiary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="tertiary" text="Tertiary"/>) } }}>
      <Button usage="tertiary" text="Tertiary"/>
  </Story>
  <Story story={stories.buttonCSS3} />
</Canvas>

---

### Quaternary Buttons

- **Usage:** For fourth-level actions or actions.
- **Style:** Appears as a link, with a small amount of letterspacing and underline (Actually a `border-bottom` not a text underline). The hover state darkens the underline and increases it's weight.

<Canvas>
  <Story
    name="button-quaternary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="quaternary" text="Quaternary" />) } }}>
      <Button usage="quaternary" text="Quaternary" />
  </Story>
  <Story story={stories.buttonCSS4} />
</Canvas>

---

### Disabled Buttons

- **Usage:** Disabled buttons should not be clickable. The disabled attribute (as opposed to hidden) can be applied for actions where the user should see the action and it's state but may not be able to perform it because they either don't have permission or some other condition in the form has not been met.
- **Style:** Disabled buttons have no box shadow (since the box shadow is what suggests clickability). Their opacity is `0.5.`, no hover or focus states are provided and the cursor is set to `not-allowed`.


<Canvas>
  <Story
    name="button-primary--disabled"
    parameters={{ docs: { transformSource: () => renderReactMarkup(<Button usage="" text="Disabled" disabled/>) } }}>
      <Button usage="" text="Disabled" disabled/>
  </Story>
  <Story
    name="button-secondary--disabled"
    parameters={{ docs: { transformSource: (src) => renderReactMarkup(<Button usage="secondary" text="Disabled" disabled/>) } }}>
      <Button usage="secondary" text="Disabled" disabled/>
  </Story>
  <Story
    name="button-tertiary--disabled"
    parameters={{ docs: { transformSource: (src) => renderReactMarkup(<Button usage="tertiary" text="Disabled" disabled/>) } }}>
      <Button usage="tertiary" text="Disabled" disabled/>
  </Story>
  <Story
    name="button-quaternary--disabled"
    parameters={{ docs: { transformSource: (src) => renderReactMarkup(<Button usage="quaternary" text="Disabled" disabled/>) } }}>
      <Button usage="quaternary" text="Disabled" disabled/>
  </Story>
  <Story story={stories.buttonCSSDisabled} />
</Canvas>


### Button with Icon
- **Usage:** Use an icon to supplement the text label of a button. Only select a recognisable icon that will help convey the functionality of the button. 
- **Style:** The icon is styled consistently with the text label.

<Canvas>
  <Story
    name="button-icon-primary-c-primary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button usage="">
        <span>Enter</span>
        <IconArrow focusable="false" />
      </Button>
    ) } }}>
      <Button usage="">
        <span>Enter</span>
        <IconArrow focusable="false" />
      </Button>
  </Story>
  <Story
    name="button-icon-primary-c-primary-alt"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button theme="c-primary-alt">
        <span>Search</span>
        <IconSearch focusable="false" />
      </Button>
    ) } }}>
      <Button theme="c-primary-alt">
        <span>Search</span>
        <IconSearch focusable="false" />
      </Button>
  </Story>
  <Story
    name="button-icon-primary-c-highlight"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button theme="c-highlight">
        <span>Notices</span>
        <IconAlert focusable="false" />
      </Button>
    ) } }}>
      <Button theme="c-highlight">
        <span>Notices</span>
        <IconAlert focusable="false" />
      </Button>
  </Story>
  <Story
    name="button-icon-primary-c-gray"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button theme="c-gray-dark" label="see more of ...">
        <span>See More</span>
        <IconChevron focusable="false" />
      </Button>
    ) } }}>
      <Button theme="c-gray-dark" label="see more of ...">
        <span>See More</span>
        <IconChevron focusable="false" />
      </Button>
  </Story>
    <Story
    name="button-icon-primary-c-white"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button theme="c-white" label="see more of ...">
        <span>See More</span>
        <IconChevron focusable="false" />
      </Button>
    ) } }}>
      <Button theme="c-white" label="see more of ...">
        <span>See More</span>
        <IconChevron focusable="false" />
      </Button>
  </Story>
</Canvas>

<Canvas>
    <Story
    name="button-icon-secondary-c-primary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button usage="secondary" size="small">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
    ) } }}>
      <Button usage="secondary" size="small">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
  </Story>
  <Story
    name="button-icon-secondary-c-primary-alt"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button usage="secondary" size="small" theme="c-primary-alt">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
    ) } }}>
      <Button usage="secondary" size="small" theme="c-primary-alt">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
  </Story>
    <Story
    name="button-icon-secondary-c-highlight"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button usage="secondary" size="small" theme="c-highlight">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
    ) } }}>
      <Button usage="secondary" size="small" theme="c-highlight">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
  </Story>
  <Story
    name="button-icon-secondary-c-gray"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button usage="secondary" size="small" theme="c-gray-dark">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
    ) } }}>
      <Button usage="secondary" size="small" theme="c-gray-dark">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
  </Story>
  <Story
    name="button-icon-tertiary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button usage="tertiary" size="small">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
    ) } }}>
      <Button usage="tertiary" size="small">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
  </Story>
  <Story
    name="button-icon-quaternary"
    parameters={{ docs: { transformSource: () => renderReactMarkup(
      <Button usage="quaternary">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
    ) } }}>
      <Button usage="quaternary">
        <span>Log In</span>
        <IconLogin focusable="false" />
      </Button>
  </Story>
</Canvas>

---

### Accessibility & Best Practices

- **Always** use `<button>` or `<a>` tags,** never** `<div>` or `<img>` tags so they are recognizable to screen readers.
- **Always** Make sure text and background colors have sufficient contrast to meet WCAG guidelines.
- **Never** disable or hide the browser focus state so focussed elements always have a visual affordance.
- When using icons in buttons:
  1. **Never** use an icon alone without text and always provide text for the icon itself, unlesss the icon is purely decorative.
  2. If it is decorative, use `aria-hidden="true"`, with an empty alt attribute `alt=""`, and do not use `title` or other aria attributes.
- When styling links as buttons, remember the keyboard handles links and buttons differently. The **Space** key triggers a button, but the **Enter** key triggers a link. Your UI help text should reflect that.
