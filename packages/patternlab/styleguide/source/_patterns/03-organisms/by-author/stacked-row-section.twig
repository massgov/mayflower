{% set stackedRowRestriction = stackedRowSection.sideBar|length ? '' : ' ma__stacked-row--restricted' %}
{% set stackedRowBorderless = stackedRow.borderless ? ' ma__stacked-row__section--borderless' : ''  %}

{# Allow overriding the content container classes as needed. #}
{% if externalSidebar is defined and externalSidebar == true %}
  {% set mainContentClass = '' %}
{% else %}
  {% set mainContentClass = stackedRowSection.sideBar|length ? ' main-content--two' : ' main-content--full' %}
{% endif %}

<section class="ma__stacked-row__section {{ stackedRowBorderless }}{{ stackedRowRestriction }}">
  {% block stackRowTitle %}
    {% if stackedRowSection.title %}
      <div class="ma__stacked-row__container">
        <div class="ma__stacked-row__title">
          {% set compHeading = {
              "title": stackedRowSection.title,
              "sub": "",
              "color": "",
              "id": stackedRowSection.id
            }
          %}
          {% include "@atoms/04-headings/comp-heading.twig" %}
        </div>
      </div>
    {% endif %}
  {% endblock %}
  {% block stackedRowContentOverride %}
      {% if stackedRowSection.sideBar|length or stackedRowSection.overrideSideBar %}
      <div class="ma__stacked-row__container{{ mainContentClass }}">
        <div class="page-content">
          {% for content in stackedRowSection.pageContent %}
            {% include content.path with content.data %}
          {% endfor %}
        </div>
        <aside class="sidebar">
          {% block sidebar %}
            {% for sidebar in stackedRowSection.sideBar %}
              {% include sidebar.path with sidebar.data %}
            {% endfor %}
          {% endblock %}
        </aside>
      </div>
      {% else %}
      <div class="ma__stacked-row__container{{ mainContentClass }}">
          {% for content in stackedRowSection.pageContent %}
            {% include content.path with content.data %}
          {% endfor %}
      </div>
      {% endif %}
  {% endblock %}
</section>

